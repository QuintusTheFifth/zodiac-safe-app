import { Contract } from "ethers";
import { defaultProvider } from "../services/helpers";

const GNOSIS_GENERIC_PROXY_CONTRACT_BYTECODE =
  "0x608060405273ffffffffffffffffffffffffffffffffffffffff600054167fa619486e0000000000000000000000000000000000000000000000000000000060003514156050578060005260206000f35b3660008037600080366000845af43d6000803e60008114156070573d6000fd5b3d6000f3fea265627a7a72315820d8a00dc4fe6bf675a9d7416fc2d00bb3433362aa8186b750f76c4027269667ff64736f6c634300050e0032";

const GNOSIS_GENERIC_PROXY_CONTRACT_ABI = [
  "function masterCopy() external view returns (address)",
];

const DELAY_MODULE_CONTRACT_BYTECODE =
  "0x608060405234801561001057600080fd5b50600436106101375760003560e01c80639b56d5be116100b8578063dcafac091161007c578063dcafac0914610361578063de8dd91d1461037f578063e009cfde1461039d578063ebb2b4a2146103b9578063ee072baf146103d5578063f0450518146103f157610137565b80639b56d5be146102ce578063b19d4758146102ea578063c34c08e5146102f4578063c66323e514610312578063cc2f84521461033057610137565b8063468721a7116100ff578063468721a71461022c57806346ba230714610248578063605df59c14610264578063610b5925146102825780636b0a4cf61461029e57610137565b8063258148cc1461013c5780632d9ad53d1461016c578063300c661f1461019c5780633aa76906146101cc578063427e232f146101fc575b600080fd5b61015660048036038101906101519190611d3c565b61040d565b604051610163919061262d565b60405180910390f35b61018660048036038101906101819190611b28565b610425565b60405161019391906123fc565b60405180910390f35b6101b660048036038101906101b19190611c49565b6104f7565b6040516101c39190612417565b60405180910390f35b6101e660048036038101906101e19190611d3c565b610530565b6040516101f3919061262d565b60405180910390f35b61021660048036038101906102119190611d3c565b61054d565b6040516102239190612417565b60405180910390f35b61024660048036038101906102419190611bc9565b610565565b005b610262600480360381019061025d9190611d3c565b61072e565b005b61026c61084f565b604051610279919061262d565b60405180910390f35b61029c60048036038101906102979190611b28565b610855565b005b6102b860048036038101906102b39190611d3c565b610bf1565b6040516102c59190612417565b60405180910390f35b6102e860048036038101906102e39190611d3c565b610c0e565b005b6102f2610cf5565b005b6102fc610d6b565b6040516103099190612432565b60405180910390f35b61031a610d8f565b604051610327919061262d565b60405180910390f35b61034a60048036038101906103459190611b8d565b610d95565b6040516103589291906123cc565b60405180910390f35b610369610fe2565b604051610376919061262d565b60405180910390f35b610387610fe8565b604051610394919061262d565b60405180910390f35b6103b760048036038101906103b29190611b51565b610fee565b005b6103d360048036038101906103ce9190611d3c565b611389565b005b6103ef60048036038101906103ea9190611bc9565b611421565b005b61040b60048036038101906104069190611ced565b6116f4565b005b60066020528060005260406000206000915090505481565b60008173ffffffffffffffffffffffffffffffffffffffff16600173ffffffffffffffffffffffffffffffffffffffff16141580156104f05750600073ffffffffffffffffffffffffffffffffffffffff16600760008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614155b9050919050565b6000848484846040516020016105109493929190612319565b604051602081830303815290604052805190602001209050949350505050565b600060066000838152602001908152602001600020549050919050565b60056020528060005260406000206000915090505481565b600073ffffffffffffffffffffffffffffffffffffffff16600760003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161415610634576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161062b9061250d565b60405180910390fd5b610684858585858080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f82011690508083019250505050505050846104f7565b600560006004548152602001908152602001600020819055504260066000600454815260200190815260200160002081905550600560006004548152602001908152602001600020546004547f4c8a9c748e976c17c2eb2c2bc50da76eac9cd90ff529f0fe900e0c10a179f031878787878760405161070795949392919061237e565b60405180910390a36004600081548092919061072290612893565b91905055505050505050565b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16146107bc576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016107b3906125ed565b60405180910390fd5b6003548111610800576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016107f7906124ad565b60405180910390fd5b600454811115610845576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161083c906124cd565b60405180910390fd5b8060038190555050565b60025481565b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16146108e3576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016108da906125ed565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff161415801561094d5750600173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614155b61098c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610983906125ad565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff16600760008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614610a5a576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a519061254d565b60405180910390fd5b60076000600173ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16600760008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508060076000600173ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055507fecdf3a3effea5783a3c4c2140e677577666428d44ed9d474a0b3a4c9943f844081604051610be69190612363565b60405180910390a150565b600060056000838152602001908152602001600020549050919050565b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614610c9c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610c93906125ed565b60405180910390fd5b6000811480610cac5750603c8110155b610ceb576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ce2906124ed565b60405180910390fd5b8060028190555050565b5b600060025414158015610d3757504260025460015460066000600354815260200190815260200160002054610d2b919061271a565b610d35919061271a565b105b8015610d47575060045460035411155b15610d695760036000815480929190610d5f90612893565b9190505550610cf6565b565b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60035481565b606060008267ffffffffffffffff811115610dd9577f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b604051908082528060200260200182016040528015610e075781602001602082028036833780820191505090505b509150600080600760008773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690505b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614158015610eda5750600173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614155b8015610ee557508482105b15610fd35780848381518110610f24577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b602002602001019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff1681525050600760008273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690508180610fcb90612893565b925050610e70565b80925081845250509250929050565b60015481565b60045481565b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161461107c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611073906125ed565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16141580156110e65750600173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614155b611125576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161111c906125ad565b60405180910390fd5b8073ffffffffffffffffffffffffffffffffffffffff16600760008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16146111f2576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016111e99061244d565b60405180910390fd5b600760008273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16600760008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506000600760008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055507faab4fa2b463f581b2b32cb3b7e3b704b9ce37cc209b5fb4d77e593ace40542768160405161137d9190612363565b60405180910390a15050565b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614611417576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161140e906125ed565b60405180910390fd5b8060018190555050565b60045460035410611467576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161145e9061258d565b60405180910390fd5b600154600660006003548152602001908152602001600020544261148b9190612770565b10156114cc576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016114c39061252d565b60405180910390fd5b42600254600154600660006003548152602001908152602001600020546114f3919061271a565b6114fd919061271a565b1161153d576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016115349061246d565b60405180910390fd5b61158d858585858080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f82011690508083019250505050505050846104f7565b60056000600354815260200190815260200160002054146115e3576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016115da9061248d565b60405180910390fd5b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663468721a786868686866040518663ffffffff1660e01b815260040161164495949392919061237e565b602060405180830381600087803b15801561165e57600080fd5b505af1158015611672573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906116969190611cc4565b6116d5576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016116cc9061260d565b60405180910390fd5b600360008154809291906116e890612893565b91905055505050505050565b600073ffffffffffffffffffffffffffffffffffffffff1660008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614611783576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161177a906125cd565b60405180910390fd5b60008114806117935750603c8110155b6117d2576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016117c9906124ed565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff161461180f5761180e6118bc565b5b826000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555080600281905550816001819055508273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f3e0cc44510b6e74a9dc4238e8c6333297bcbb7ec294d752f3b6206419ee12b6760405160405180910390a3505050565b600073ffffffffffffffffffffffffffffffffffffffff1660076000600173ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161461198b576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016119829061256d565b60405180910390fd5b600160076000600173ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550565b6000611a20611a1b84612679565b612648565b905082815260208101848484011115611a3857600080fd5b611a43848285612851565b509392505050565b600081359050611a5a816129e8565b92915050565b600081519050611a6f816129ff565b92915050565b60008083601f840112611a8757600080fd5b8235905067ffffffffffffffff811115611aa057600080fd5b602083019150836001820283011115611ab857600080fd5b9250929050565b600082601f830112611ad057600080fd5b8135611ae0848260208601611a0d565b91505092915050565b600081359050611af881612a16565b92915050565b600081359050611b0d81612a2d565b92915050565b600081359050611b2281612a3d565b92915050565b600060208284031215611b3a57600080fd5b6000611b4884828501611a4b565b91505092915050565b60008060408385031215611b6457600080fd5b6000611b7285828601611a4b565b9250506020611b8385828601611a4b565b9150509250929050565b60008060408385031215611ba057600080fd5b6000611bae85828601611a4b565b9250506020611bbf85828601611b13565b9150509250929050565b600080600080600060808688031215611be157600080fd5b6000611bef88828901611a4b565b9550506020611c0088828901611b13565b945050604086013567ffffffffffffffff811115611c1d57600080fd5b611c2988828901611a75565b93509350506060611c3c88828901611afe565b9150509295509295909350565b60008060008060808587031215611c5f57600080fd5b6000611c6d87828801611a4b565b9450506020611c7e87828801611b13565b935050604085013567ffffffffffffffff811115611c9b57600080fd5b611ca787828801611abf565b9250506060611cb887828801611afe565b91505092959194509250565b600060208284031215611cd657600080fd5b6000611ce484828501611a60565b91505092915050565b600080600060608486031215611d0257600080fd5b6000611d1086828701611ae9565b9350506020611d2186828701611b13565b9250506040611d3286828701611b13565b9150509250925092565b600060208284031215611d4e57600080fd5b6000611d5c84828501611b13565b91505092915050565b6000611d718383611d7d565b60208301905092915050565b611d86816127a4565b82525050565b611d95816127a4565b82525050565b611dac611da7826127a4565b6128dc565b82525050565b6000611dbd826126b9565b611dc781856126dc565b9350611dd2836126a9565b8060005b83811015611e03578151611dea8882611d65565b9750611df5836126cf565b925050600181019050611dd6565b5085935050505092915050565b611e19816127b6565b82525050565b611e28816127c2565b82525050565b6000611e3a83856126ed565b9350611e47838584612851565b611e50836129a9565b840190509392505050565b6000611e66826126c4565b611e7081856126fe565b9350611e80818560208601612860565b80840191505092915050565b611e958161281b565b82525050565b611ea48161283f565b82525050565b611ebb611eb68261283f565b61290a565b82525050565b6000611ece601783612709565b91507f4d6f64756c6520616c72656164792064697361626c65640000000000000000006000830152602082019050919050565b6000611f0e601383612709565b91507f5472616e73616374696f6e2065787069726564000000000000000000000000006000830152602082019050919050565b6000611f4e601f83612709565b91507f5472616e73616374696f6e2068617368657320646f206e6f74206d61746368006000830152602082019050919050565b6000611f8e602d83612709565b91507f4e6577206e6f6e6365206d75737420626520686967686572207468616e20637560008301527f7272656e742074784e6f6e6365000000000000000000000000000000000000006020830152604082019050919050565b6000611ff4602083612709565b91507f43616e6e6f7420626520686967686572207468616e2071756575654e6f6e63656000830152602082019050919050565b6000612034602d83612709565b91507f457870697261746974696f6e206d7573742062652030206f72206174206c656160008301527f7374203630207365636f6e6473000000000000000000000000000000000000006020830152604082019050919050565b600061209a601583612709565b91507f4d6f64756c65206e6f7420617574686f72697a656400000000000000000000006000830152602082019050919050565b60006120da602083612709565b91507f5472616e73616374696f6e206973207374696c6c20696e20636f6f6c646f776e6000830152602082019050919050565b600061211a601683612709565b91507f4d6f64756c6520616c726561647920656e61626c6564000000000000000000006000830152602082019050919050565b600061215a602483612709565b91507f73657455704d6f64756c65732068617320616c7265616479206265656e20636160008301527f6c6c6564000000000000000000000000000000000000000000000000000000006020830152604082019050919050565b60006121c0601a83612709565b91507f5472616e73616374696f6e20717565756520697320656d7074790000000000006000830152602082019050919050565b6000612200600e83612709565b91507f496e76616c6964206d6f64756c650000000000000000000000000000000000006000830152602082019050919050565b6000612240601d83612709565b91507f4d6f64756c6520697320616c726561647920696e697469616c697a65640000006000830152602082019050919050565b6000612280600e83612709565b91507f4e6f7420617574686f72697a65640000000000000000000000000000000000006000830152602082019050919050565b60006122c0601983612709565b91507f4d6f64756c65207472616e73616374696f6e206661696c6564000000000000006000830152602082019050919050565b6122fc81612811565b82525050565b61231361230e82612811565b612900565b82525050565b60006123258287611d9b565b6014820191506123358286612302565b6020820191506123458285611e5b565b91506123518284611eaa565b60018201915081905095945050505050565b60006020820190506123786000830184611d8c565b92915050565b60006080820190506123936000830188611d8c565b6123a060208301876122f3565b81810360408301526123b3818587611e2e565b90506123c26060830184611e9b565b9695505050505050565b600060408201905081810360008301526123e68185611db2565b90506123f56020830184611d8c565b9392505050565b60006020820190506124116000830184611e10565b92915050565b600060208201905061242c6000830184611e1f565b92915050565b60006020820190506124476000830184611e8c565b92915050565b6000602082019050818103600083015261246681611ec1565b9050919050565b6000602082019050818103600083015261248681611f01565b9050919050565b600060208201905081810360008301526124a681611f41565b9050919050565b600060208201905081810360008301526124c681611f81565b9050919050565b600060208201905081810360008301526124e681611fe7565b9050919050565b6000602082019050818103600083015261250681612027565b9050919050565b600060208201905081810360008301526125268161208d565b9050919050565b60006020820190508181036000830152612546816120cd565b9050919050565b600060208201905081810360008301526125668161210d565b9050919050565b600060208201905081810360008301526125868161214d565b9050919050565b600060208201905081810360008301526125a6816121b3565b9050919050565b600060208201905081810360008301526125c6816121f3565b9050919050565b600060208201905081810360008301526125e681612233565b9050919050565b6000602082019050818103600083015261260681612273565b9050919050565b60006020820190508181036000830152612626816122b3565b9050919050565b600060208201905061264260008301846122f3565b92915050565b6000604051905081810181811067ffffffffffffffff8211171561266f5761266e61297a565b5b8060405250919050565b600067ffffffffffffffff8211156126945761269361297a565b5b601f19601f8301169050602081019050919050565b6000819050602082019050919050565b600081519050919050565b600081519050919050565b6000602082019050919050565b600082825260208201905092915050565b600082825260208201905092915050565b600081905092915050565b600082825260208201905092915050565b600061272582612811565b915061273083612811565b9250827fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff038211156127655761276461291c565b5b828201905092915050565b600061277b82612811565b915061278683612811565b9250828210156127995761279861291c565b5b828203905092915050565b60006127af826127f1565b9050919050565b60008115159050919050565b6000819050919050565b60006127d7826127a4565b9050919050565b60008190506127ec826129d4565b919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b60006128268261282d565b9050919050565b6000612838826127f1565b9050919050565b600061284a826127de565b9050919050565b82818337600083830152505050565b60005b8381101561287e578082015181840152602081019050612863565b8381111561288d576000848401525b50505050565b600061289e82612811565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8214156128d1576128d061291c565b5b600182019050919050565b60006128e7826128ee565b9050919050565b60006128f9826129c7565b9050919050565b6000819050919050565b6000612915826129ba565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6000601f19601f8301169050919050565b60008160f81b9050919050565b60008160601b9050919050565b600281106129e5576129e461294b565b5b50565b6129f1816127a4565b81146129fc57600080fd5b50565b612a08816127b6565b8114612a1357600080fd5b50565b612a1f816127cc565b8114612a2a57600080fd5b50565b60028110612a3a57600080fd5b50565b612a4681612811565b8114612a5157600080fd5b5056fea264697066735822122015b63859f774f744ad3a67ab5fd7b74ee27c4f9690c3d05c975c68741bf9ef3f64736f6c63430008000033";

export function isGnosisGenericProxy(bytecode: string) {
  return bytecode.toLowerCase() === GNOSIS_GENERIC_PROXY_CONTRACT_BYTECODE;
}

export function isDelayModuleBytecode(bytecode: string) {
  return bytecode.toLowerCase() === DELAY_MODULE_CONTRACT_BYTECODE;
}

export function isGenericProxy(bytecode: string) {
  if (bytecode.length !== 92) return false;
  return (
    bytecode.startsWith("0x363d3d373d3d3d363d73") &&
    bytecode.endsWith("5af43d82803e903d91602b57fd5bf3")
  );
}

export function getGenericProxyMaster(bytecode: string) {
  return "0x" + bytecode.substr(22, 40);
}

export async function getProxyMaster(address: string) {
  const contract = new Contract(
    address,
    GNOSIS_GENERIC_PROXY_CONTRACT_ABI,
    defaultProvider
  );

  const [masterAddress] = await contract.functions.masterCopy();

  return masterAddress;
}
